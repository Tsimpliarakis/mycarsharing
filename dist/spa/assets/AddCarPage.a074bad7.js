import{Q as r}from"./QInput.274331f1.js";import{Q as w}from"./QSelect.3136724c.js";import{r as a,z as I,L as N,C as P,D as s,aF as T,B as t,M as B,t as L,O as j,P as z,J as Q,H as K}from"./index.fbbb49e6.js";import{Q as D}from"./QPage.e7766711.js";import{u as E}from"./use-quasar.0a14f71b.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.3179d14c.js";import"./use-dark.03fbf057.js";import"./uid.9b787859.js";import"./format.2c147f7f.js";import"./focusout.4067daa6.js";import"./QItemSection.9255a723.js";import"./QMenu.6b8632dc.js";import"./selection.8a7e64c6.js";const h=u=>(j("data-v-113b447e"),u=u(),z(),u),R={class:"text-center"},G=h(()=>s("div",{class:"text-h6"},"Add New Car",-1)),H=h(()=>s("div",{class:"text-left text-grey-8"},"Photos",-1)),J=h(()=>s("br",null,null,-1)),O={__name:"AddCarPage",setup(u){const n=a(""),i=a(""),d=a(""),p=a(""),m=a(""),c=a(""),v=a(""),g=a(""),f=a(""),V=a([]),y=a(!1),_=E();function b(l){let e=l.keyCode?l.keyCode:l.which;(e<48||e>57)&&l.preventDefault()}function S(l){V.value=l.target.files}async function k(){y.value=!0;const l=[],e="https://igohglatbbhgyelsipze.supabase.co/storage/v1/object/public/cars/";try{for(const x of V.value){const M=Math.random().toString(36).substring(2,15),A=x.name.split(".").pop(),U=`${M}.${A}`,{data:Y,error:q}=await Q.storage.from("cars").upload(U,x);if(q)throw q;l.push(e+U)}V.value.length===0&&l.push("https://igohglatbbhgyelsipze.supabase.co/storage/v1/object/public/cars/generic.jpeg");const{data:o,error:C}=await Q.from("cars").insert([{user_id:K.state.session.user.id,manufacturer:n.value,model:i.value,year:d.value,color:p.value,fuel_type:m.value,image_url:l,price:c.value,location:v.value,mileage:g.value,transmission_type:f.value}]).single();if(C)throw C;n.value="",i.value="",d.value="",p.value="",m.value="",c.value="",v.value="",g.value="",f.value="",V.value=[],_.notify({position:"top",color:"positive",message:"Car added successfully"})}catch{_.notify({position:"top",color:"negative",message:"Error adding car"})}finally{y.value=!1}}return(l,e)=>(I(),N(D,{class:"flex flex-center"},{default:P(()=>[s("div",R,[G,s("form",{onSubmit:T(k,["prevent"])},[t(r,{color:"green",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),placeholder:"Manufacturer",required:""},null,8,["modelValue"]),t(r,{color:"green",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),placeholder:"Model",required:""},null,8,["modelValue"]),t(r,{onKeypress:b,color:"green",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),placeholder:"Year",required:""},null,8,["modelValue"]),t(r,{color:"green",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),placeholder:"Color",required:""},null,8,["modelValue"]),t(r,{color:"green",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),placeholder:"Gas Type",required:""},null,8,["modelValue"]),t(r,{onKeypress:b,color:"green",modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o),placeholder:"Mileage",required:""},null,8,["modelValue"]),t(w,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value=o),options:["Automatic","Manual"],label:"Transmission Type",required:"",color:"green"},null,8,["modelValue"]),t(w,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=o=>v.value=o),options:["Athens","Corfu","Polykastro","Thessaloniki"],label:"Location",required:"",color:"green"},null,8,["modelValue"]),t(r,{onKeypress:b,color:"green",modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=o=>c.value=o),placeholder:"Price",required:""},null,8,["modelValue"]),H,s("input",{class:"photos",type:"file",multiple:"",onChange:S},null,32),J,t(L,{loading:y.value,color:"green",type:"submit"},{default:P(()=>[B("Submit")]),_:1},8,["loading"])],32)])]),_:1}))}};var de=F(O,[["__scopeId","data-v-113b447e"]]);export{de as default};
